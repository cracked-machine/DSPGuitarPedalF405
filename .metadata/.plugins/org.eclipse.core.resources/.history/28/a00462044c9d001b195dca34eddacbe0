/*
 * RTOSTask.hpp
 *
 *  Created on: Apr 14, 2021
 *      Author: chris
 */

#ifndef FREERTOS_RTOSTASK_HPP_
#define FREERTOS_RTOSTASK_HPP_

#include "FreeRTOS.h"
#include "task.h"

class Thread
{
public:
	Thread( unsigned portSHORT _stackDepth, UBaseType_t _priority, const char* _name = "" )
	{
		xTaskCreate( task, _name, _stackDepth, this, _priority, &this->taskHandle );
	}

	virtual void Main() = 0;

protected:
	static void task( void* _params )
	{
		Thread* p = static_cast<Thread*>( _params );
		p->Main();
	}

	TaskHandle_t taskHandle;
};


#endif /* FREERTOS_RTOSTASK_HPP_ */
